<link rel="import" href="/sys/polymer/polymer.html">

<template>
    <template is="dom-bind">
        <div class="mdc-card wastetrader-card">
            <section class="mdc-card__primary">
                <h2 class="mdc-card__title mdc-card__title--large">Filtrera
                    <svg version="1.1" 
                        xmlns="http://www.w3.org/2000/svg" 
                        on-click="toggleFilters" 
                        xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                        viewBox="0 0 284.929 284.929"
                        xml:space="preserve" class="wastetrader__expand-icon">
                        <path d="M282.082,195.285L149.028,62.24c-1.901-1.903-4.088-2.856-6.562-2.856s-4.665,0.953-6.567,2.856L2.856,195.285
                            C0.95,197.191,0,199.378,0,201.853c0,2.474,0.953,4.664,2.856,6.566l14.272,14.271c1.903,1.903,4.093,2.854,6.567,2.854
                            c2.474,0,4.664-0.951,6.567-2.854l112.204-112.202l112.208,112.209c1.902,1.903,4.093,2.848,6.563,2.848
                            c2.478,0,4.668-0.951,6.57-2.848l14.274-14.277c1.902-1.902,2.847-4.093,2.847-6.566
                            C284.929,199.378,283.984,197.188,282.082,195.285z"/>
                    </svg>
                </h2>
            </section>
            <div class="wastetrader--hidden">
                <section class="mdc-card__supporting-text">
                    <div class="mdc-textfield" data-mdc-auto-init="MDCTextfield">
                        <input type="number" class="mdc-textfield__input" id="wastetrader-filter__max-distance" value="{{model.MaxDistance$::input}}">
                        <label class="mdc-textfield__label" for="wastetrader-filter__max-distance">Längst avstånd</label>
                    </div>
                    <div class="mdc-textfield" data-mdc-auto-init="MDCTextfield">
                        <input type="number" class="mdc-textfield__input" id="wastetrader-filter__min-distance" value="{{model.MinDistance$::input}}">
                        <label class="mdc-textfield__label" for="wastetrader-filter__min-distance">Kortast avstånd</label>
                    </div>
                    <br>
                    <div class="mdc-textfield" data-mdc-auto-init="MDCTextfield">
                        <input type="number" class="mdc-textfield__input" id="wastetrader-filter__max-hits" value="{{model.MaxMatches$::input}}">
                        <label class="mdc-textfield__label" for="wastetrader-filter__max-hits">Max antal träffar</label>
                    </div>
                    <br>
                    <div class="mdc-textfield" data-mdc-auto-init="MDCTextfield">
                        <input type="number" class="mdc-textfield__input" id="wastetrader-filter__price-per-unit" value="{{model.PricePerUnitLimit$::input}}">
                        <label class="mdc-textfield__label" for="wastetrader-filter__price-per-unit">Pris per enhet</label>
                    </div>
                    <br>
                    <div class="mdc-textfield" data-mdc-auto-init="MDCTextfield">
                        <input type="number" class="mdc-textfield__input" id="wastetrader-filter__max-quantity" value="{{model.MaxQuantity$::input}}">
                        <label class="mdc-textfield__label" for="wastetrader-filter__max-quantity">Max kvantitet</label>
                    </div>
                    <div class="mdc-textfield" data-mdc-auto-init="MDCTextfield">
                        <input type="number" class="mdc-textfield__input" id="wastetrader-filter__min-quantity" value="{{model.MinQuantity$::input}}">
                        <label class="mdc-textfield__label" for="wastetrader-filter__min-quantity">Min kvantitet</label>
                    </div>
                </section>
                <section class="mdc-card__actions">
                    <button class="mdc-button mdc-card__action" value="{{model.SubmitTrigger$::click}}" onclick="++this.value" data-mdc-auto-init="MDCRipple">Sök</button>
                </section>
            </div>
        </div>
        <script>mdc.autoInit()</script>
    </template>
        <script>
            (function() {
                const script = document._currentScript || document.currentScript;
                const template = script.previousElementSibling;

                template.toggleFilters = function(event) {
                    let target = event.target;

                    if (target.tagName === "path"){
                        target = target.parentNode;
                    }
                    
                    target.classList.toggle("wastetrader__expand-icon--rotated");

                    const filters = target.parentNode.parentNode.nextElementSibling;
                    filters.classList.toggle("wastetrader--hidden");
                }
            })();
        </script>
</template>